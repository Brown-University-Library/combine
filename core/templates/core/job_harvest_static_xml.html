{% extends 'core/base.html' %}

{% block content %}

	<div class="row">
		<div class="col-md-12">
			<h3>Static XML Harvest Job</h3>
			<p>Still nascent, Combine provides the ability to harvest records from static XML files.</p>
		</div>
	</div>
		

	<div class="row">
		<div class="col-md-6">
			<form method="POST" action="{% url 'job_harvest_static_xml' org_id=record_group.organization.id record_group_id=record_group.id %}" enctype="multipart/form-data">

				{% csrf_token %}

				<!-- optional job details -->
				{% include 'core/job_optional_details.html' %}

				<!-- payload -->
				<p>Provide either a file upload or location on disk for static XML files.</p>

				<div class="form-group">
					<div class="custom-file">
						<input type="file" name="static_payload" class="custom-file-input" id="static_payload">
						<label class="custom-file-label" for="static_payload">Uplaod XML file</label>
					</div>
				</div>

				<div class="form-group">
					<label for="static_filepath">Location of XML files on disk:</label>
					<input type="text" class="form-control" id="static_filepath" name="static_filepath" placeholder="e.g. /foo/bar/baz">
				</div>

				<!-- xpath -->
				<p>Next, we need an XPath expression that helps pinpoint the records from your provided static files:
					<table class="table table-bordered table-hover">
						<tr>
							<td>zip / tar file of discrete XML files</td>
							<td>XPath that drills down to metadata record, for each file</td>
							<td>e.g. <code>//mods:mods</code></td>
						</tr>
						<tr>
							<td>aggregate XML file with multiple records</td>
							<td>XPath that drills down to metadata record within large XML file</td>
							<td>e.g. <code>//metadata/*[namespace-uri()='http://www.loc.gov/mods/v3']</code>
						</tr>
						<tr>
							<td>Location on disk</td>
							<td>Assuming directory of multiple files, XPath that drills down to metadata record, for each file</td>
							<td>e.g. <code>/</code> (perhaps just a single slash indicating metadata is at the root of the file)</td>
						</tr>
					</table>
				</p>

				<div class="form-group">
					<label for="xpath_document_root">XPath for metadata document root (default <code>/*</code>):</label>
					<input type="text" class="form-control" id="xpath_document_root" name="xpath_document_root" placeholder="e.g. //mods:mods or //metadata/*[namespace-uri()='http://www.loc.gov/mods/v3']">
				</div>

				<!-- xpath -->
				<p>Finally, need an xpath expression for identifying a unique string to serve as the record ID for each record:</p>		
				
				<div class="form-group">
					<label for="xpath_record_id">XPath for unique record identifier (default md5 hash of document string):</label>
					<input type="text" class="form-control" id="xpath_record_id" name="xpath_record_id" placeholder="e.g. //mods:mods/mods:location/mods:url[@access]">
				</div>
				
				<div class="row">
					<div class="col-md-12">
						<!-- Indexing Mapping Selection -->
						{% include 'core/index_mapping_select.html' %}

						<!-- Record Validation Selection -->
						{% include 'core/record_validation_select.html' %}
					</div>
				</div>

				<button type="submit" class="btn btn-primary btn-sm">Run Job</button>

			</form>

		</div>
	</div>

{% endblock %}