{% extends 'core/base.html' %}

{% block content %}

	<h3>Jobs for Record Group: {{ record_group.name }}</h3>

	<p>Record Group description: <em>{{ record_group.description }}</em></p>

	<div>
		<table border="1" cellpadding="5">
			<tr>
				<th>Job ID</th>
				<th>Name</th>
				<th>Livy Job ID</th>
				<th>Status</th>
				<th>Monitor</th>
				<th>Finished</th>
				<th>Input</th>
				<th>Output</th>
				<th>Record Count</th>
				<th>actions</th>
			</tr>
			{% for job in record_group_jobs %}
				<tr>
					<td>{{ job.id }}</td>
					<td>{{ job.name }}</td>
					<td>{{ job.job_id }}</td>
					<td>{{ job.status }}</td>
					<td><a href="http://{{ APP_HOST }}:8998{{ job.url }}" target="_blank">Livy Statement</a> / <a href="{{ livy_session.sparkUiUrl }}/jobs/job?id={{job.job_id}}" target="_blank">Spark UI</a></td> 
					<td>{{ job.finished }}</td>
					<td>{{ job.job_input }}</td>
					{% if 'hdfs://' in job.job_output %}
						<td><a href="http://{{ APP_HOST }}:50070/explorer.html#/user/combine/record_group/{{ record_group.id }}/jobs/harvest/{{ job.id }}" target="_blank">{{ job.job_output }}</a></td>
					{% else %}
						<td>{{ job.job_output }}</td>
					{% endif %}
					<td>{{ job.record_count }}</td>
					<td><a href="{% url 'job_delete' record_group_id=record_group.id job_id=job.id %}">Delete</a></td>
				</tr>
			{% endfor %}
		</table>
	</div>

	<div>
		<h3>Run new job</h3>
		<p>
			<ul>
				<li><a href="{% url 'job_harvest' record_group_id=record_group.id %}">Harvest</a></li>
				<li><a href="{% url 'job_transform' record_group_id=record_group.id %}">Transform</a></li>
				<li><a href="#">Map and Index to ElasticSearch</a></li>
				<li><a href="#">Publish</a></li>
			</ul>
		</p>
	</div>

{% endblock %}